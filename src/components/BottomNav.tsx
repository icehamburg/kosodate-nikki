'use client'

import Link from 'next/link'

type Props = {
  current: 'home' | 'calendar' | 'summary' | 'export'
}

function HomeIcon({ active }: { active: boolean }) {
  return (
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fillRule="evenodd" clipRule="evenodd" d="M11.1504 0.350409C11.2619 0.238657 11.3943 0.149994 11.5401 0.0894988C11.6859 0.0290033 11.8422 -0.00213623 12 -0.00213623C12.1578 -0.00213623 12.3141 0.0290033 12.4599 0.0894988C12.6057 0.149994 12.7381 0.238657 12.8496 0.350409L23.6496 11.1504C23.761 11.2621 23.8492 11.3946 23.9094 11.5403C23.9695 11.6861 24.0003 11.8423 24 12V20.4C24 21.3548 23.6207 22.2705 22.9456 22.9456C22.2705 23.6207 21.3548 24 20.4 24H13.5V16.8C13.5 16.4022 13.342 16.0207 13.0607 15.7393C12.7794 15.458 12.3978 15.3 12 15.3C11.6022 15.3 11.2206 15.458 10.9393 15.7393C10.658 16.0207 10.5 16.4022 10.5 16.8V24H3.6C2.64522 24 1.72955 23.6207 1.05442 22.9456C0.379285 22.2705 0 21.3548 0 20.4V12C-0.000282 11.8423 0.03052 11.6861 0.0906442 11.5403C0.150768 11.3946 0.239036 11.2621 0.3504 11.1504L11.1504 0.350409Z" fill={active ? 'var(--color-icon-active)' : 'var(--color-icon-inactive)'} />
    </svg>
  )
}

function CalendarIcon({ active }: { active: boolean }) {
  return (
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fillRule="evenodd" clipRule="evenodd" d="M7.5 1.5C7.5 1.10218 7.34196 0.720644 7.06066 0.43934C6.77936 0.158035 6.39782 0 6 0C5.60218 0 5.22064 0.158035 4.93934 0.43934C4.65804 0.720644 4.5 1.10218 4.5 1.5V3H3.6C2.64522 3 1.72955 3.37928 1.05442 4.05442C0.379285 4.72955 0 5.64522 0 6.6V20.4C0 21.3548 0.379285 22.2705 1.05442 22.9456C1.72955 23.6207 2.64522 24 3.6 24H20.4C21.3548 24 22.2705 23.6207 22.9456 22.9456C23.6207 22.2705 24 21.3548 24 20.4V6.6C24 5.64522 23.6207 4.72955 22.9456 4.05442C22.2705 3.37928 21.3548 3 20.4 3H19.5V1.5C19.5 1.10218 19.342 0.720644 19.0607 0.43934C18.7794 0.158035 18.3978 0 18 0C17.6022 0 17.2206 0.158035 16.9393 0.43934C16.658 0.720644 16.5 1.10218 16.5 1.5V3H7.5V1.5ZM5.1384 10.3128C5.1384 9.4848 5.8104 8.8128 6.6384 8.8128H17.3616C17.7594 8.8128 18.141 8.97084 18.4223 9.25214C18.7036 9.53344 18.8616 9.91498 18.8616 10.3128C18.8616 10.7106 18.7036 11.0922 18.4223 11.3735C18.141 11.6548 17.7594 11.8128 17.3616 11.8128H6.6384C6.24058 11.8128 5.85904 11.6548 5.57774 11.3735C5.29644 11.0922 5.1384 10.7106 5.1384 10.3128ZM5.1384 16.0872C5.1384 15.2592 5.8104 14.5872 6.6384 14.5872H12C12.3978 14.5872 12.7794 14.7452 13.0607 15.0265C13.342 15.3078 13.5 15.6894 13.5 16.0872C13.5 16.485 13.342 16.8666 13.0607 17.1479C12.7794 17.4292 12.3978 17.5872 12 17.5872H6.6384C6.24058 17.5872 5.85904 17.4292 5.57774 17.1479C5.29644 16.8666 5.1384 16.485 5.1384 16.0872Z" fill={active ? 'var(--color-icon-active)' : 'var(--color-icon-inactive)'} />
    </svg>
  )
}

function GraphIcon({ active }: { active: boolean }) {
  return (
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fillRule="evenodd" clipRule="evenodd" d="M23.472 23.472C23.7234 23.2203 23.8946 22.8997 23.9639 22.5507C24.0332 22.2018 23.9976 21.8401 23.8615 21.5114C23.7254 21.1827 23.4949 20.9017 23.1992 20.7039C22.9035 20.5061 22.5558 20.4003 22.2 20.4H4.2C4.04087 20.4 3.88826 20.3368 3.77574 20.2243C3.66321 20.1117 3.6 19.9591 3.6 19.8V1.8C3.6 1.32261 3.41036 0.864773 3.07279 0.527208C2.73523 0.189642 2.27739 0 1.8 0C1.32261 0 0.864773 0.189642 0.527208 0.527208C0.189642 0.864773 0 1.32261 0 1.8V22.2C0 22.6774 0.189642 23.1352 0.527208 23.4728C0.864773 23.8104 1.32261 24 1.8 24H22.2C22.6772 23.9996 23.1348 23.8097 23.472 23.472ZM10.224 16.9872C10.4067 17.0624 10.6024 17.1008 10.8 17.1L10.9056 17.0976C11.1201 17.0818 11.3287 17.0204 11.5175 16.9173C11.7063 16.8142 11.8708 16.6719 12 16.5L17.7432 8.8344C17.7947 8.7655 17.8605 8.7085 17.936 8.66725C18.0115 8.626 18.095 8.60147 18.1808 8.59532C18.2666 8.58917 18.3528 8.60156 18.4334 8.63163C18.514 8.6617 18.5872 8.70875 18.648 8.7696L20.5392 10.6608C20.6785 10.8001 20.8439 10.9106 21.0259 10.986C21.2079 11.0614 21.403 11.1002 21.6 11.1002C21.797 11.1002 21.9921 11.0614 22.1741 10.986C22.3561 10.9106 22.5215 10.8001 22.6608 10.6608C22.8001 10.5215 22.9106 10.3561 22.986 10.1741C23.0614 9.99209 23.1002 9.79701 23.1002 9.6C23.1002 9.40299 23.0614 9.20791 22.986 9.0259C22.9106 8.84389 22.8001 8.67851 22.6608 8.5392L19.0608 4.9392C18.9079 4.78861 18.7251 4.67189 18.5241 4.59663C18.3231 4.52138 18.1086 4.48927 17.8944 4.5024C17.6799 4.51816 17.4713 4.57964 17.2825 4.68272C17.0937 4.78579 16.9292 4.92807 16.8 5.1L11.0544 12.7632C11.0029 12.8321 10.9371 12.8891 10.8616 12.9304C10.7861 12.9716 10.7026 12.9961 10.6168 13.0023C10.531 13.0084 10.4448 12.996 10.3642 12.966C10.2836 12.9359 10.2104 12.8888 10.1496 12.828L8.2608 10.9392C7.97946 10.6579 7.59788 10.4998 7.2 10.4998C6.80212 10.4998 6.42054 10.6579 6.1392 10.9392C5.85786 11.2205 5.6998 11.6021 5.6998 12C5.6998 12.3979 5.85786 12.7795 6.1392 13.0608L9.7392 16.6608C9.8785 16.8006 10.0441 16.9116 10.2264 16.9872H10.224Z" fill={active ? 'var(--color-icon-active)' : 'var(--color-icon-inactive)'} />
    </svg>
  )
}

function PrinterIcon({ active }: { active: boolean }) {
  return (
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fillRule="evenodd" clipRule="evenodd" d="M16.5 3V6H7.5V3H16.5ZM4.5 2.7V6H2.4C1.76348 6 1.15303 6.25286 0.702944 6.70294C0.252856 7.15303 0 7.76348 0 8.4V16.8C0 17.4365 0.252856 18.047 0.702944 18.4971C1.15303 18.9471 1.76348 19.2 2.4 19.2H4.5V21.3C4.5 22.0161 4.78446 22.7028 5.29081 23.2092C5.79716 23.7155 6.48392 24 7.2 24H16.8C17.5161 24 18.2028 23.7155 18.7092 23.2092C19.2155 22.7028 19.5 22.0161 19.5 21.3V19.2H21.6C22.2365 19.2 22.847 18.9471 23.2971 18.4971C23.7471 18.047 24 17.4365 24 16.8V8.4C24 8.08483 23.9379 7.77274 23.8173 7.48156C23.6967 7.19038 23.5199 6.9258 23.2971 6.70294C23.0742 6.48008 22.8096 6.3033 22.5184 6.18269C22.2273 6.06208 21.9152 6 21.6 6H19.5V2.7C19.5 1.98392 19.2155 1.29716 18.7092 0.790812C18.2028 0.284464 17.5161 0 16.8 0H7.2C6.48392 0 5.79716 0.284464 5.29081 0.790812C4.78446 1.29716 4.5 1.98392 4.5 2.7ZM7.5 14.4H16.5V21H7.5V14.4Z" fill={active ? 'var(--color-icon-active)' : 'var(--color-icon-inactive)'} />
    </svg>
  )
}

function SettingsIcon() {
  return (
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M21.2304 13.5456V10.4544L22.6104 8.724C22.8427 8.43451 22.9819 8.08149 23.0098 7.71138C23.0376 7.34126 22.9528 6.97138 22.7664 6.6504L22.0176 5.3496C21.8321 5.02817 21.554 4.77013 21.2197 4.60915C20.8853 4.44817 20.5102 4.39173 20.1432 4.4472L17.9544 4.7784L15.276 3.2328L14.4696 1.1736C14.3342 0.828038 14.0978 0.53127 13.7913 0.321943C13.4848 0.112616 13.1224 0.000432 12.7512 0H11.2488C10.8777 0.000432 10.5152 0.112616 10.2087 0.321943C9.90223 0.53127 9.66586 0.828038 9.53041 1.1736L8.72401 3.2328L6.04561 4.7784L3.85681 4.4472C3.48987 4.39173 3.11473 4.44817 2.78036 4.60915C2.44598 4.77013 2.1679 5.02817 1.98241 5.3496L1.23361 6.6504C1.04725 6.97138 0.962414 7.34126 0.990259 7.71138C1.0181 8.08149 1.15732 8.43451 1.38961 8.724L2.76961 10.4544V13.5456L1.38961 15.276C1.15732 15.5655 1.0181 15.9185 0.990259 16.2886C0.962414 16.6587 1.04725 17.0286 1.23361 17.3496L1.98241 18.6504C2.1679 18.9718 2.44598 19.2299 2.78036 19.3909C3.11473 19.5518 3.48987 19.6083 3.85681 19.5528L6.04561 19.2216L8.72401 20.7672L9.53041 22.8264C9.66586 23.172 9.90223 23.4687 10.2087 23.6781C10.5152 23.8874 10.8777 23.9996 11.2488 24H12.7512C13.1224 23.9996 13.4848 23.8874 13.7913 23.6781C14.0978 23.4687 14.3342 23.172 14.4696 22.8264L15.276 20.7672L17.9544 19.2216L20.1432 19.5528C20.5102 19.6083 20.8853 19.5518 21.2197 19.3909C21.554 19.2299 21.8321 18.9718 22.0176 18.6504L22.7664 17.3496C22.9528 17.0286 23.0376 16.6587 23.0098 16.2886C22.9819 15.9185 22.8427 15.5655 22.6104 15.276L21.2304 13.5456ZM12 15.6C11.5273 15.6 11.0591 15.5069 10.6224 15.326C10.1856 15.145 9.78872 14.8799 9.45443 14.5456C9.12014 14.2113 8.85496 13.8144 8.67405 13.3777C8.49313 12.9409 8.40001 12.4728 8.40001 12C8.40001 11.5272 8.49313 11.0591 8.67405 10.6223C8.85496 10.1856 9.12014 9.78871 9.45443 9.45442C9.78872 9.12012 10.1856 8.85495 10.6224 8.67403C11.0591 8.49312 11.5273 8.4 12 8.4C12.9548 8.4 13.8705 8.77928 14.5456 9.45442C15.2207 10.1295 15.6 11.0452 15.6 12C15.6 12.9548 15.2207 13.8705 14.5456 14.5456C13.8705 15.2207 12.9548 15.6 12 15.6Z" fill="var(--color-icon-active)" />
    </svg>
  )
}

const iconComponents = {
  home: HomeIcon,
  calendar: CalendarIcon,
  summary: GraphIcon,
  export: PrinterIcon,
}

const navItems = [
  { id: 'home', label: 'ホーム', href: '/' },
  { id: 'calendar', label: 'カレンダー', href: '/calendar' },
  { id: 'summary', label: 'まとめ', href: '/summary' },
  { id: 'export', label: '出力', href: '/export' },
] as const

export { SettingsIcon }

export default function BottomNav({ current }: Props) {
  return (
    <nav
      className="fixed bottom-0 left-0 right-0 z-40"
      style={{ background: 'var(--color-nav-bg)' }}
    >
      <div className="flex justify-around pt-2 pb-1" style={{ paddingBottom: 'max(8px, env(safe-area-inset-bottom, 0px))' }}>
        {navItems.map(item => {
          const Icon = iconComponents[item.id]
          const isActive = current === item.id
          return (
            <Link
              key={item.id}
              href={item.href}
              className="flex flex-col items-center py-1 px-4"
            >
              <Icon active={isActive} />
              <span
                style={{
                  fontWeight: isActive ? 700 : 400,
                  fontSize: 10,
                  color: isActive ? 'var(--color-icon-active)' : 'var(--color-icon-inactive)',
                  marginTop: 4,
                }}
              >
                {item.label}
              </span>
            </Link>
          )
        })}
      </div>
    </nav>
  )
}
